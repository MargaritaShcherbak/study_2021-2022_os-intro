---
## Front matter

title: "Отчёт по лабораторной работе №7"
subtitle: "Командная оболочка Midnight Commander"
author: "Щербак Маргарита Романовна"
date: "2022"
## Generic otions
lang: ru-RU

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc-depth: 2
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."

listingTitle: "Листинг"
lofTitle: "Список иллюстраций"

lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы:
Освоение основных возможностей командной оболочки Midnight Commander. Приобретение навыков практической работы по просмотру каталогов и файлов; манипуляций с ними.

# Теоретическое введение: 
*Командная оболочка* — интерфейс взаимодействия пользователя с операционной системой и программным обеспечением посредством команд. 
Midnight Commander (или mc) — псевдографическая командная оболочка для UNIX/Linux систем. Для запуска mc необходимо в командной строке набрать mc и нажать Enter. 
Рабочее пространство mc имеет две панели, отображающие по умолчанию списки файлов двух каталогов.

Панель в mc отображает список файлов текущего каталога. Абсолютный путь к этому
каталогу отображается в заголовке панели. У активной панели заголовок и одна из её
строк подсвечиваются. Управление панелями осуществляется с помощью определённых
комбинаций клавиш или пунктов меню mc.
Панели можно поменять местами. Для этого и используется комбинация клавиш Ctrl-u
или команда меню mc Переставить панели . Также можно временно убрать отображение
панелей (отключить их) с помощью комбинации клавиш Ctrl-o или команды меню mc
Отключить панели . Это может быть полезно, например, если необходимо увидеть вывод
какой-то информации на экран после выполнения какой-либо команды shell.
С помощью последовательного применения комбинации клавиш Ctrl-x d есть возможность сравнения каталогов, отображённых на двух панелях. Панели могут дополнительно быть переведены в один из двух режимов: Информация или Дерево. В режиме
Информация на панель выводятся сведения о файле и текущей файловой системе,
расположенных на активной панели. В режиме Дерево на одной из панелей выводится структура дерева каталогов. 
Управлять режимами отображения панелей можно через пункты меню mc Правая панель
и Левая панель.
# Выполнение лабораторной работы:

- **Задание по mc**

1. Изучили информацию о mc, вызвав в командной строке man mc. (Рис. [-@fig:001])

![man mc](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-44-30.png){#fig:001 width=75%}   

2. Запустили из командной строки mc, изучили его структуру и меню. (Рис. [-@fig:002]).

![Midnight Commander](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-46-29.png){#fig:002 width=75%}

3. Выполнили несколько операций в mc, используя управляющие клавиши (операции
с панелями; выделение/отмена выделения файлов, копирование/перемещение файлов, получение информации о размере и правах доступа на файлы и/или каталоги и т.п.).

4. Выполнили основные команды меню левой (или правой) панели. Оценили степень подробности вывода информации о файлах. (Рис. [-@fig:003]).

![Выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-49-49.png){#fig:003 width=80%}

5. Используя возможности подменю Файл , выполнили:  
– просмотр содержимого текстового файла;   
– редактирование содержимого текстового файла (без сохранения результатов редактирования);  
– создание каталога;  
– копирование файлов в созданный каталог. (Рис. [-@fig:004] - Рис. [-@fig:005]).

![Содержимое файла file.txt](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-50-31.png){#fig:004 width=80%}

![Скопировали файл file.txt в созданный каталог Lab007](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-53-18.png){#fig:005 width=80%}

6. С помощью соответствующих средств подменю Команда осуществили:  
– поиск в файловой системе файла с заданными условиями; (Рис. [-@fig:006] - Рис. [-@fig:007]). 

![Поиск файла с расширением .conf](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-54-20.png){#fig:006 width=90%}

![Поиск файла, начинающегося с буквы h](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-55-56.png){#fig:007 width=90%}

– выбор и повторение одной из предыдущих команд (Рис. [-@fig:008]). 

![История команд](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-57-15.png){#fig:008 width=75%}

– переход в домашний каталог (Рис. [-@fig:009]).

![Выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2016-58-43.png){#fig:009 width=75%}

– анализ файла меню и файла расширений (Рис. [-@fig:0010])

![Выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-11%2017-35-14.png){#fig:0010 width=80%}

7. Вызвали подменю Настройки . Осволи операции, определяющие структуру экрана mc. (Рис [-@fig:0011])

![Настройки структуры экрана mc](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2017-00-46.png){#fig:0011 width=80%}

- **Задание по встроенному редактору mc**

1. Создли текстовой файл text.txt.
2. Открыли этот файл с помощью встроенного в mc редактора.
3. Вставили в открытый файл небольшой фрагмент текста. (Рис [-@fig:0012])

![Выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2017-04-25.png){#fig:0012 width=70%}

4. Проделали с текстом следующие манипуляции, используя горячие клавиши: 
- Удалили строку текста.
- Вывели фрагмент текста и скопировали его на новую строку.
- Выделили фрагмент текста и перенесли его на новую строку.
- Сохранили файл.
- Отменили последнее действие.
- Перешли в конец файла (нажав комбинацию клавиш) и написали некоторый текст.
- Перешли в начало файла (нажав комбинацию клавиш) и написали некоторый текст.
- Сохранили и закрыли файл. (Рис [-@fig:0013])

![редактирование содержимого файла](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2017-08-43.png){#fig:0013 width=80%} 

5. Открыли файл с исходным текстом на некотором языке программирования.
6. Используя меню редактора, включили подсветку синтаксиса. (Рис [-@fig:0014])

![Подсветка синтаксиса](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2017-10-39.png){#fig:0014 width=80%} 

Вставим некоторый код на С++, чтобы продемонстрировать подсветку ещё лучше (Рис. [-@fig:0015] - Рис. [-@fig:0016]). 

![Без подсветки](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2017-11-36.png){#fig:0015 width=80%} 

![С подсветкой](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2017-11-48.png){#fig:0016 width=80%}

*Контрольные вопросы:* 

1. Какие режимы работы есть в mc. Охарактеризуйте их.  
MC позволяет одновременно наблюдать содержимое двух каталогов. Одна из панелей является текущей (в этой панели находится выделитель). Панели могут дополнительно быть переведены в один из двух режимов:  
«Информация» или «Дерево». В режиме «Информация» на панель выводятся сведения о файле и текущей файловой системе, расположенных на активной
панели. В режиме «Дерево» на одной из панелей выводится структура дерева каталогов.
2. Как с помощью команд shell, так и с помощью меню (комбинаций клавиш)
mc можно выполнить следующие операции с файлами:  
• копирование "F5" ("cp имя_файла имя_каталога (в который копируем)")  
• перемещение/переименование "F6" ("mv имя_файла имя_каталога (в который перемещаем)")  
• создание каталога "F7" ("mkdir имя_каталога")  
• удаление "F8" ("rm имя_файла")  
• изменение прав доступа "ctrl+x" ("chmod u+x имя_файла")
3. Опишите структуру меню левой (или правой) панели mc, дайте характеристику командам.  
Перейти в строку меню панелей mc можно с помощью функциональной клавиши «F9». В строке меню имеются пять меню: «Левая панель», «Файл»,
«Команда», «Настройки» и «Правая панель».  
Подпункт меню «Быстрый просмотр» позволяет выполнить быстрый просмотр содержимого панели.
Подпункт меню «Информация» позволяет посмотреть информацию о файле или каталоге. В меню каждой (левой или правой) панели можно выбрать «Формат
списка»:  
• стандартный − выводит список файлов и каталогов с указанием размера и времени правки;  
• ускоренный − позволяет задать число столбцов, на которые разбивается панель при выводе списка имён файлов или каталогов без дополнительной
информации;  
• расширенный − помимо названия файла или каталога выводит сведения о правах доступа, владельце, группе, размере, времени правки;  
• определённый пользователем − позволяет вывести те сведения о файле или каталоге, которые задаст сам пользователь.  
Подпункт меню «Порядок сортировки» позволяет задать критерии сортировки при выводе списка файлов и каталогов: без сортировки, по имени, расширенный, время правки, время доступа, время изменения атрибута, размер, узел.
4. Команды меню «Файл»:  
• Просмотр(«F3»)− позволяет посмотреть содержимое текущего (или выделенного) файла без возможности редактирования.  
• Просмотр вывода команды («М»+«!»)− функция запроса команды с параметрами (аргумент к текущему выбранному файлу).  
• Правка(«F4») − открывает текущий (или выделенный) файл для его редактирования.
• Копирование(«F5»)− осуществляет копирование одного или нескольких файлов или каталогов в указанное пользователем во всплывающем окне
место.  
• Права доступа («Ctrl-x»«c»)− позволяет указать (изменить) права доступа к одному или нескольким файлам или каталогам.  
• Жёсткая ссылка («Ctrl-x»«l»)− позволяет создать жёсткую ссылку к текущему(или выделенному) файлу.  
• Символическая ссылка («Ctrl-x»«s»)− позволяет создать символическую ссылку к текущему (или выделенному) файлу.  
• Владелец/группа («Ctrl-x»«o»)− позволяет задать (изменить) владельца и имя группы для одного или нескольких файлов или каталогов.  
• Права(расширенные)− позволяет изменить права доступа и владения для одного или нескольких файлов или каталогов.  
• Переименование («F6»)− позволяет переименовать (или переместить) один или несколько файлов или каталогов.  
• Создание каталога («F7») − позволяет создать каталог.  
• Удалить («F8») − позволяет удалить один или несколько файлов или каталогов.  
• Выход («F10») − завершает работу mc.
5. Меню Команда  
В меню Команда содержатся более общие команды для работы с mc.  
• Дерево каталогов − отображает структуру каталогов системы.  
• Поиск файла − выполняет поиск файлов по заданным параметрам.  
• Переставить панели − меняет местами левую и правую панели.  
• Сравнить каталоги («Ctrl-x»«d») − сравнивает содержимое двух каталогов.  
• Размеры каталогов − отображает размер и время изменения каталога (по умолчанию в mc размер каталога корректно не отображается).  
• История командной строки − выводит на экран список ранее выполненных в оболочке команд.  
• Каталоги быстрого доступа(Ctrl-»)− при вызове выполняется быстрая смена текущего каталога на один из заданного списка.  
• Восстановление файлов − позволяет восстановить файлы на файловых системах ext2 и ext3.
• Редактировать файл расширений − позволяет задать с помощью определённого синтаксиса действия при запуске файлов с определённым расширением (например, какое программное обеспечение запускать для открытия или редактирования файлов с расширением doc или docx).  
• Редактировать файл меню − позволяет отредактировать контекстное меню
пользователя, вызываемое по клавише «F2».  
• Редактировать файл расцветки имён − позволяет подобрать оптимальную
для пользователя расцветку имён файлов в зависимости от их типа.
6. Меню Настройки содержит ряд дополнительных опций по внешнему виду и функциональности mc.  
• Конфигурация − позволяет скорректировать настройки работы с панелями.  
• Внешний вид и Настройки панелей − определяет элементы (строка меню,
командная строка, подсказки и прочее), отображаемые при вызове mc, а
также геометрию расположения панелей и цветовыделение.  
• Биты символов − задаёт формат обработки информации локальным терминалом.  
• Подтверждение − позволяет установить или убрать вывод окна с запросом
подтверждения действий при операциях удаления и перезаписи файлов, а
также при выходе из программы.  
• Распознание клавиш − диалоговое окно используется для тестирования
функциональных клавиш, клавиш управления курсором и прочее.  
• Виртуальные ФС − настройки виртуальной файловой системы: тайм-аут, пароль и прочее.
7. Функциональные клавиши mc:  
• F1 – вызов контекстно-зависимой подсказки  
• F2 – вызов пользовательского меню с возможностью создания и/или дополнения дополнительных функций  
• F3 – просмотр содержимого файла, на который указывает подсветка в активной панели (без возможности редактирования)  
• F4 – вызов встроенного в mc редактора для изменения содержания файла,
на который указывает подсветка в активной панели  
• F5 – копирование одного или нескольких файлов, отмеченных впервой
(активной) панели, в каталог, отображаемый на второй панели  
• F6 – перенос одного или нескольких файлов, отмеченных в первой (активной) панели, в каталог, отображаемый на второй панели  
• F7 – создание подкаталога в каталоге, отображаемом в активной панели  
• F8 – удаление одного или нескольких файлов (каталогов), отмеченных в
первой (активной) панели файлов  
• F9 – вызов меню mc  
• F10 – выход из mc
8. Встроенный в mc редактор вызывается с помощью функциональной клавиши «F4». В нём удобно использовать различные комбинации клавиш при
редактировании содержимого (как правило текстового) файла. 
Клавиши для редактирования файла:  
• «Ctrl-y» − удалить строку  
• «Ctrl-u» − отмена последней операции  
• «ins» - вставка/замена  
• «F7» − поиск (можно использовать регулярные выражения)  
• «F4» − замена  
• «F3» − первое нажатие − начало выделения, второе − окончание выделения  
• «F5» − копировать выделенный фрагмент  
• «F6» − переместить выделенный фрагмент  
• «F8» − удалить выделенный фрагмент  
• «F2» − записать изменения в файл  
• «F10» − выйти из редактор
9. Для редактирования меню пользователя, которое вызывается клавишей
«F2», необходимо перейти в пункт «Редактировать файл меню» «Команда»
и изменить настройки файла.
10. Часть команд «Меню пользователя», а также меню «Файл» позволяют выполнять действия, определяемые пользователем, над текущим файлом. Например, копирование каталога или файла, переименование, перемещение,
архивирование.

# Выводы

Таким образом, в ходе ЛР№7 я освоила основные возможности командной оболочки Midnight Commander, приобрела навыки практической работы по просмотру каталогов и файлов; манипуляций с ними.
