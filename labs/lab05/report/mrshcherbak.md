---
## Front matter

title: "Отчёт по лабораторной работе №5"
subtitle: "Анализ файловой системы Linux. Команды для работы с файлами и каталогами"
author: "Щербак Маргарита Романовна"
date: "2022"
## Generic otions
lang: ru-RU

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc-depth: 2
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."

listingTitle: "Листинг"
lofTitle: "Список иллюстраций"

lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы:
Ознакомление с файловой системой Linux, её структурой, именами и содержанием
каталогов. Приобретение практических навыков по применению команд для работы
с файлами и каталогами,по управлению процессами (и работами),по проверке исполь-
зования диска и обслуживанию файловой системы.

# Теоретическое введение: 
Для созданиятекстового файла можно использовать команду touch. 
Для просмотра файлов небольшого размера можно использовать команду cat. 
Для просмотра файлов постранично удобнее использовать команду less. 
Команда cp используется для копирования файлов и каталогов. 
Опция i в команде cp выведет на экран запрос подтверждения о перезаписи файла. 
Для рекурсивного копирования каталогов,содержащих файлы,используется команда
cp с опцией r. 
Команды mv и mvdir предназначены для перемещения и переименования файлов
и каталогов. 
Каждый файл или каталог имеет права доступа.
В сведениях о файле или каталоге указываются: 

– тип файла (символ (-) обозначает файл,а символ (d)—каталог);  
– права для владельца файла (r —разрешено чтение,w —разрешена запись,x —разрешено выполнение,- —право доступа отсутствует);  
– права для членов группы (r —разрешено чтение,w —разрешена запись,x —разрешено
выполнение,- —право доступа отсутствует);  
– правадлявсехостальных (r—разрешено чтение,w —разрешена запись,x—разрешено выполнение,- —право доступа отсутствует). 
Права доступа к файлу или каталогу можно изменить,воспользовавшись командой
chmod. Сделать это может владелец файла (или каталога) или пользователь с правами
администратора.

# Выполнение лабораторной работы:

1. Выполнили все примеры, приведённые в первой части описания лабораторной работы.(Рис. [-@fig:001] - Рис. [-@fig:003]) 

![Выполнение примеров](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2011-10-22.png){#fig:001 width=80%}  

![Примеры](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2011-23-30.png){#fig:002 width=80%}  

![Команды](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2011-30-12.png){#fig:003 width=80%}   

2. Выполнили следующие действия (Рис. [-@fig:004]).
   - Скопировали файл /usr/include/sys/io.h в домашний каталог и назвали его equipment. 
   - В домашнем каталоге создали директорию ~/ski.plases.
   - Переместили файл equipment в каталог ~/ski.plases.
   - Переименовали файл ~/ski.plases/equipment в /ski.plases/equiplist.
   - Создали в домашнем каталоге файл abc1 и скопировали его в каталог ~/ski.plases,назвали его equiplist2.
   - Создали каталог с именем equipment в каталоге ~/ski.plases.
   - Переместили файлы ~/ski.plases/equiplist и equiplist2 в каталог ~/ski.plases/equipment.
   - Создали и переместили каталог ~/newdir в каталог ~/ski.plases и назвали его plans.

![Выполнение действий](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2011-45-02.png){#fig:004 width=80%}

3. Определили опции команды chmod,необходимые длятого,чтобы присвоить перечисленным ниже файлам выделенные права доступа, считая, что в начале таких прав нет: (Рис. [-@fig:005] - Рис. [-@fig:008]). 
    1. drwxr--r-- ... australia 
    2. drwx--x--x ... play 
    3. -r-xr--r-- ... my_os 
    4. -rw-rw-r-- ... feathers  
При необходимости создали нужные файлы.  

![Владельцу каталога australia устанавливаем права доступа на чтение, запись и выполнение, группе людей и остальным пользователям - только на чтение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-04-33.png){#fig:005 width=100%}

![Владельцу каталога play устанавливаем права доступа на чтение и запись, группе и остальным пользователям - только на выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-05-58.png){#fig:006 width=100%}

![Владельцу файла my_os устанавливаем права доступа на чтение и выполнение, группе и остальным пользователям - только на чтение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-08-12.png){#fig:007 width=100%}

![Владельцу и группе, к которой принадлежит владелец, файла feathers устанавливаем права доступа на чтение и запись, остальным пользователям - только на чтение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-09-29.png){#fig:008 width=100%}

4. Проделали приведённые ниже упражнения (Рис. [-@fig:009] - Рис. [-@fig:0010]): 
- Просмотрели содержимое файла /etc/password.
- Скопировали файл /feathers в файл /file.old.
- Переместили файл /file.old в каталог /play.
- Скопировали каталог /play в каталог /fun.
- Переместили каталог /fun в каталог /play и назвали его games. 
- Лишили владельца файла ~/feathers права на чтение. 
Если я попытаюсь просмотреть файл ~/feathers командой cat, то мне будет отказано в доступе, так как у меня нет прав на чтение. 
Если я попытаюсь скопировать файл ~/feathers, то мне также будет отказано в доступе, так как у меня нет права на копирование. (r)
- Дали владельцу файла ~/feathers право на чтение.
- Лишили владельца каталога ~/play права на выполнение.
- Першли в каталог ~/play. В действии было отказано, так как у меня нет права на выполнение (х).
- Дали владельцу каталога ~/play право на выполнение. 
  
![Выполнение действий](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-28-43.jpg){#fig:009 width=80%}

![Выполнение действий](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-37-26.png){#fig:0010 width=80%}

5. Прочитали man по командам mount,fsck,mkfs,kill (Рис. [-@fig:0011] - Рис. [-@fig:0014]). 

![man mount](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-45-09.png){#fig:0011 width=90%}

![man fsck](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-48-15.png){#fig:0012 width=90%}

![man mkfs](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2014-39-35.png){#fig:0013 width=90%}

mkfs позволяет создать файловую систему.

![man kill](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-03%2012-50-22.png){#fig:0014 width=90%}

Для передачи сигналов процессам в Linux используется утилита kill. Ее синтаксис очень прост: kill -сигнал pid_процесса. Допустим, у нас выполняется утилита ping. Мы хотим ее завершить с помощью kill. Тогда, сначала мы узнаем ее идентификатор с помощью команды ps: ps aux | grep ping. В первой строчке отобразится сама утилита ping, а во второй сама программа ps. Берем нужный PID и завершаем процесс с помощью SIGTERM: kill 20446. 

# Контрольные вопросы: 

1. Чтобы узнать, какие файловые системы существуют на жёстком диске моегокомпьютера, использую команду mount (Так же можно использовать команды df -Th, cat /etc/fstab). На моем компьютере есть следующие файловые системы: devtmpfs,tmpfs,ext4,iso9660, btrfs. 
devtmpfs позволяет ядру создать экземпляр tmpfs с именем devtmpfs при инициализации ядра, прежде чем регистрируется какое-либо устройство с драйверами. Каждое устройство с майором/минором будет предоставлять узел устройства в devtmpfs. devtmpfs монтируется на /dev и содержит специальные файлы
устройств для всех устройств. tmpfs−временное файловое хранилище во многих
Unix-подобных ОС. Предназначена для монтирования файловой системы, но
размещается в ОЗУ вместо ПЗУ. Подобная конструкция является RAM диском.
Данная файловая система также предназначена для быстрого и ненадёжного
хранения временных данных. Хорошо подходит для /tmp и массовой сборки
пакетов/образов. Предполагает наличие достаточного объёма виртуальной памяти.Файловая система tmpfs предназначена для того, чтобы использовать часть физической памяти сервера как обычный дисковый раздел, в котором можно сохранять данные (чтение и запись). Поскольку данные размещены в памяти,
то чтение или запись происходят во много раз быстрее, чем с обычного HDD
диска. 
ext4 имеет обратную совместимость с предыдущими версиями ФС. Эта
версия была выпущена в 2008 году. Является первой ФС из «семейства» Ext, использующая механизм «extentfile system», который позволяет добиться меньшей фрагментации файлов и увеличить общую производительностьфайловой
системы. Кроме того, в Ext4 реализован механизм отложенной записи, который также уменьшает фрагментацию диска и снижает
нагрузку на CPU. С другой стороны, хотя механизм отложенной записи и ис пользуется во многих ФС, но в силу сложности своей реализации он повышает вероятность утери данных. Характеристики: максимальный размер файла: 16 TB; максимальный размер раздела: 16TB; максимальный размер имени файла: 255
символов. Рекомендации по использованию: наилучший выбор дляSSD; наилучшая производительность по сравнению с предыдущими Etx-системами; она так же отлично подходит в качестве файловой системы для серверов баз данных, хотя сама система и моложе Ext3. 
ISO9660−стандарт, выпущенный Международной
организацией по стандартизации, описывающий файловую систему для дисков
CD-ROM. Также известен как CDFS (Compact Disc File System). Целью стандарта
является обеспечить совместимость носителей под разными операционными
системами, такими, как Unix, Mac OS, Windows. Btrfs или B-Tree File System - это совершенно новая файловая система, которая сосредоточена на отказоустойчивости, легкости администрирования и восстановления данных. Файловая система объединяет в себе очень много новых интересных возможностей, таких как размещение на нескольких разделах, поддержка подтомов, изменение размера не лету, создание мгновенных снимков, а также высокая производительность. Но многими пользователями файловая система Btrfs считается нестабильной. Тем не менее, она уже используется как файловая система по умолчанию в OpenSUSE и SUSE Linux. 
2. Файловая система Linux/UNIX физически представляет собой пространство
раздела диска разбитое на блоки фиксированного размера, кратные размеру сектора − 1024, 2048, 4096 или 8120 байт. Размер блока указывается при создании файловой системы. В файловой структуре Linux имеется один корневой раздел (он же root, корень). Все разделы жесткого диска (если их несколько) представляют собой структуру подкаталогов, “примонтированных” к определенным каталогам. - “/” − корень. Это главный каталог в системе Linux. По сути, это и есть файловая система Linux. Адреса всех файлов начинаются с корня, а дополнительные разделы, флешки или оптические диски подключаются в папки корневого
каталога. Только пользователь root имеет право читать и изменять файлы в этом
каталоге. 
/bin — здесь находятся двоичные исполняемые файлы. Основные общие команды, хранящиеся отдельно от других программ в системе (прим.: pwd, ls, cat, ps); 
/boot — тут расположены файлы, используемые для загрузки системы (образ initrd, ядро vmlinuz); 
/dev — в данной директории располагаются файлы устройств (драйверов). С помощью этих файлов можно взаимодействовать с устройствами. К примеру, если это жесткий диск, можно подключить его к файловой системе. В файл принтера же можно написать напрямую и отправить задание на печать; 
/etc — в этой директории находятся файлы конфигураций программ. Эти файлы позволяют настраивать системы, сервисы, скрипты системных демонов; 
/home — каталог, аналогичный каталогу Users в Windows. Содержит домашние каталоги учетных записей пользователей (кроме root). При создании нового пользователя здесь создается одноименный каталог с аналогичным именем и хранит личные файлы этого пользователя; 
/lib — содержит системные библиотеки, с которыми работают программы и модули ядра;
/lost+found — содержит файлы, восстановленные после сбоя работы системы. Система проведет проверку после сбоя и найденные файлы можно будет посмотреть в данном каталоге; 
/media — точка монтирования внешних носителей. Например, когда вы вставляете диск в дисковод, он будет автоматически смонтирован в директорию /media/cdrom; 
/mnt — точка временного монтирования. Файловые системы подключаемых устройств обычно монтируются в этот каталог для временного использования; 
/opt — тут расположены дополнительные (необязательные) приложения. Такие программы обычно не подчиняются принятой иерархии и хранят свои файлы в одном подкаталоге (бинарные, библиотеки, конфигурации); 
/proc — содержит файлы, хранящие информацию о запущенных процессах и о состоянии ядра ОС; 
/root — директория, которая содержит файлы и личные настройки суперпользователя; 
/run — содержит файлы состояния приложений. Например, PID-файлы или UNIX-сокеты; 
/sbin — аналогично /bin содержит бинарные файлы. Утилиты нужны для настройки и администрирования системы суперпользователем;
/srv — содержит файлы сервисов, предоставляемых сервером (прим. FTP или Apache HTTP); 
/sys — содержит данные непосредственно о системе. Тут можно узнать информацию о ядре, драйверах и устройствах; 
/tmp — содержит временные файлы. Данные файлы доступны всем пользователям на чтение и запись. Стоит отметить, что данный каталог очищается при перезагрузке; 
/usr — содержит пользовательские приложения и утилиты второго уровня, используемые пользователями, а не системой. Содержимое доступно только для чтения (кроме root). Каталог имеет вторичную иерархию и похож на корневой; 
/var — содержит переменные файлы. Имеет подкаталоги, отвечающие за отдельные переменные. Например, логи будут храниться в /var/log, кэш в /var/cache, очереди заданий в /var/spool/ и так далее. 
3. Чтобы содержимое некоторой файловой системы было доступно операционной системе необходимо воспользоваться командой mount (монтирование тома). 
4. Целостность файловой системы может быть нарушена из-за перебоев в питании, неполадок в оборудовании или из-за некорректного/внезапного выключения компьютера. Чтобы устранить повреждения файловой системы необходимо использовать команду fsck. Также отсутствие синхронизации между образом файловой системы в памяти и ее данными на диске в случае аварийного останова может привести к появлению следующих ошибок:
Один блок адресуется несколькими mode (принадлежит нескольким файлам).
Блок помечен как свободный, но в то же время занят (на него ссылается onode).
Блок помечен как занятый, но в то же время свободен (ни один inode на него не ссылается).
Неправильное число ссылок в inode (недостаток или избыток ссылающихся записей в каталогах).
Несовпадение между размером файла и суммарным размером адресуемых inode блоков.
Недопустимые адресуемые блоки (например, расположенные за пределами файловой системы).
"Потерянные" файлы (правильные inode, на которые не ссылаются записи каталогов).
Недопустимые или неразмещенные номера inode в записях каталогов. 
5. Файловую систему можно создать, используя команду mkfs. Ее краткое описание дано в пункте 5) в ходе выполнения заданий лабораторной работы. 
6. Для просмотра текстовых файлов существуют следующие команды: cat. 
Задача команды cat очень проста −она читает данные из файла или стандартного
ввода и выводит их на экран. Синтаксис утилиты: cat [опции] файл1 файл2 …Основные опции: 
-b–нумеровать только непустые строки 
-E–показывать символ $ в конце каждой строки 
-n–нумеровать все строки 
-s–удалять пустые повторяющиеся строки 
-T–отображать табуляции в виде ^I 
-h–отобразить справку 
-v–версия утилиты 
-nl. Команда nl действует аналогично команде cat, но выводит еще и номера строк в столбце слева. 
less. Cущественно более развитая команда для пролистывания текста. При чтении данных со стандартного ввода она создает буфер,
который позволяет листать текст как вперед, так и назад, а также искать как по направлению к концу, так и по направлению к началу текста. Синтаксис аналогичный синтаксису команды cat. 
Некоторые опции: 
-g –при поиске подсвечивать 
только текущее найденное слово (по умолчанию подсвечиваются все вхождения) 
-N –показывать номера строк 
-head. Команда head выводит начальные строки (по умолчанию − 10) из одного или нескольких документов. Также она может показывать данные, которые передает на вывод другая утилита.Синтаксис аналогичный синтаксису команды cat.Основные опции: 
-c (–bytes) −позволяет задавать количество текста не в строках, а в байтах 
-n (–lines) −показывает заданное количество
строк вместо 10, которые выводятся по умолчанию
-q (–quiet, –silent) −выводит только текст, недобавляя к нему название файла 
-v (–verbose) −перед текстом выводит название файла 
-z (–zero-terminated) −символы перехода на новую строку заменяет символами завершения строк 
-tail - Эта командапо зволяет выводить заданное количество строк с конца файла, а также выводить новые строки в
интерактивном режиме.Синтаксис аналогичный синтаксису команды cat. 
Основные опции: 
-c −выводить указанное количество байт с конца файла 
-f −обновлять информацию по мере появления новых строк в файле 
-n −выводить указанное количество строк из конца файла 
–pid −используется с опцией 
-f, позволяет за вершить работу утилиты, когда завершится указанный процесс 
-q −не выводитьимена файлов 
-retry− повторять попытки открыть файл, если он недоступен 
-v−выводить подробную информацию о файле. 
7. Утилита cp позволяет полностью копировать файлы и директории. 
Cинтаксис:cp [опции] файл-источник файл-приемник. После выполнения команды файл источник будет полностью перенесен в файл-приемник. Если в конце указан слэш, файл будет записан в заданную директорию с оригинальным именем.
Основные опции: 
–attributes-only −не копировать содержимое файла, а только флаги доступа и владельца 
-f, –force −перезаписывать существующие файлы 
-i, –interactive −спрашивать, нужно ли перезаписывать существующие файлы 
-L −копировать не символические ссылки, а то, на что они указывают 
-n −не перезаписывать существующие файлы 
-P −не следовать символическим ссылкам 
-r −копировать папку Linux рекурсивно 
-s −не выполнять копирование файлов в Linux, а создавать символические ссылки 
-u −скопировать файл, только если он был изменён 
-x−не выходить за пределы этой файловой системы 
-p −сохранять владельца, вре менные метки и флаги доступа при копировании 
-t −считать файл-приемник директорией и копировать файл-источник в эту директорию. 
8. Команда mv используется для перемещения одного или нескольких файлов (или директорий) вдругую директорию, а также для переименования файлов и директорий.  Синтаксис:mv [-опции] старый_файл новый_файл. 
Основные оп ции: 
–help −выводит на экран официальную документацию об утилите 
–version−отображает версию mv 
-b−создает копию файлов, которые были перемещены или перезаписаны 
-f −при активации не будет спрашивать разрешение у владель ца файла, если речь идет о перемещении или переименовании файла  
-i −наоборот, будет спрашивать разрешение у владельца 
-n −отключает перезапись уже существующих объектов–strip-trailing-slashes —удаляет завершающий символ / у файла при его наличии 
-t [директория] —перемещает все файлы в указанную директорию 
-u −осуществляет перемещение только в том случае, если исходный файл новее объекта назначения  
-v −отображает сведения о каждом элементе во время обработки командыКоманда renameтакже предназначена, чтобы переиме новать файл. Синтаксис:rename [опции] старое_имя новое_имя файлы.  
Основные опции: 
-v −вывести список обработанных файлов 
-n −тестовый режим, на самом 
деле никакие действия выполнены не будут 
-f −принудительно перезаписывать существующие файлы. 
9. Права доступа− совокупность правил, регламентирующих порядок и условия доступа субъекта к объектам информационной системы (информации, её носителям, процессам и другим ресурсам) установленных правовыми документами или собственником, владельцем информации. Права доступа к файлу или
каталогу можно изменить, воспользовавшись командой chmod. Сделать это может владелец файла (или каталога) или пользователь с правами администратора.  
Синтаксис команды:chmod режим имя_файла. Режим имеет следующие компоненты структуры и способ записи: = установить право. -лишить права. + дать право. r чтение. w запись. x выполнение. u (user) владелец файла. g (group) группа, к которой принадлежит владелец файла. o (others) все остальные. 

# Выводы:

Таким образом, в ходе ЛР№5 я ознакомилась с файловой системой Linux, её структурой, именами и содержанием
каталогов. 
Приобрела практические навыки по применению команд для работы с файлами и каталогами,по управлению процессами (и работами),по проверке использования диска и обслуживанию файловой системы.
