---
## Front matter

title: "Отчёт по лабораторной работе №8"
subtitle: "Текстовой редактор vi"
author: "Щербак Маргарита Романовна"
date: "2022"
## Generic otions
lang: ru-RU

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc-depth: 2
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."

listingTitle: "Листинг"
lofTitle: "Список иллюстраций"

lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы:
Познакомиться с операционной системой Linux. Получить практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

# Теоретическое введение: 
В большинстве дистрибутивов Linux в качестве текстового редактора по умолчанию устанавливается интерактивный экранный редактор vi (Visual display editor). 
Редактор vi имеет три режима работы:  
– командный режим предназначен для ввода команд редактирования и навигации по редактируемому файлу;  
– режим вставки предназначен для ввода содержания редактируемого файла;  
– режим последней (или командной) строки используется для записи изменений в файл и выхода из редактора.  
Для вызова редактора vi необходимо указать команду vi и имя редактируемого файла: vi <имя_файла>  
При этом в случае отсутствия файла с указанным именем будет создан такой файл. Переход в командный режим осуществляется нажатием клавиши Esc.  
Для выхода из редактора vi необходимо перейти в режим последней строки:  
находясь в командном режиме,нажать Shift-; (по сути символ : —двоеточие),затем:  
– набрать символы wq,если перед выходом из редактора требуется записать изменения в файл;  
– набрать символ q (или q!),если требуется выйти из редактора без сохранения.  
Замечание. Следует помнить,что vi различает прописные и строчные буквы при наборе команд.  
Основные группы команд редактора:  
- Команды управления курсором  
- Команды позиционирования  
- Команды перемещения по файлу  
- Команды перемещения по словам  
- Команды редактирования  
- Отмена и повтор произведённых изменений  
- Копирование текста в буфер  
- Вставка текста из буфера  
- Замена текста  
- Поиск текста  
- Команды редактирования в режиме командной строки  

# Выполнение лабораторной работы:

1. Ознакомились с теоретическим материалом, редактором vi и выполнили упражнения, используя команды vi. Создали новый файл с использованием vi:
- Создали каталог с именем ~/work/os/lab06. 
- Перешли в созданный каталог lab06. 
- Вызвали vi и создали файл hello.sh (Рис. [-@fig:001])

![Создание нового файла](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2020-04-27.png){#fig:001 width=80%}   

2. Нажали на клавишу i и ввели следующий текст. (Рис. [-@fig:002]).

![Выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-05-10%20194626.png){#fig:002 width=80%}

3. Нажали клавишу Esc для перехода в командный режим после завершения ввода текста.  
Нажали : для перехода в режим последней строки и внизу экрана появилось приглашение в виде двоеточия.  
Нажали w (записать)и q (выйти),затем - клавишу Enter для сохранения текста и завершения работы.  
Сделали файл исполняемым (chmod +x hello.sh).  
Вызвали vi на редактирование файла. (Рис. [-@fig:003]).

![Выполнение](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2020-17-14.png){#fig:003 width=80%}

4. Установили курсор в конец слова HELL второй строки.  
Перешли в режим вставки и заменили на HELLO.  Нажали Esc для возврата в командный режим.  
Установили курсор на четвертую строку и стёрли слово LOCAL.  
Перешли в режим вставки и набрали следующий текст: local, нажали Esc для возврата в командный режим.  
Установли курсор на последней строке файла. Вставили после неё строку, содержащую следующий текст: echo $HELLO.  
Нажали Esc для перехода в командный режим.  
Удалили последнюю строку.  
Ввели команду отмены изменений u для отмены последней команды.  
Ввели символ : для перехода в режим последней строки. Записали произведённые изменения и вышли из vi. (Рис. [-@fig:004]).

![Итог выполнения](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202022-05-10%2018-04-32.png){#fig:004 width=80%}

*Контрольные вопросы:* 

1. Дайте краткую характеристику режимам работы редактора vi.  
Редактор vi имеет три режима работы:  
• командный режим − предназначен для ввода команд редактирования и навигации по редактируемому файлу;  
• режим вставки − предназначен для ввода содержания редактируемого файла;  
• режим последней (или командной) строки − используется для записи изменений в файл и выхода из редактора. 
2.  Чтобы выйти из редактора, не сохраняя произведённые изменения, нужно в режиме командной строки нажать клавиши «:» «q» «!». 
3. Назовите и дайте краткую характеристику командам позиционирования.  
• «0»(ноль) − переход в начало строки;  
• «$» − переход в конец строки;  
• «G» − переход в конец файла;  
• n«G» − переход на строку с номером n 
4. Что для редактора vi является словом? 
При использовании прописных W и B под разделителями понимаются только пробел, табуляция и возврат каретки. При использовании строчных w и b под разделителями понимаются также любые знаки пунктуации. 
5. Каким образом из любого места редактируемого файла перейти в начало (конец) файла? 
Чтобы из любого места редактируемого файла перейти в начало (конец) файла, нужно в режиме командной строки нажать клавиши «1» «G» («G»). 
6. Назовите и дайте краткую характеристику основным группам команд редактирования.  
Команды редактирования:
- Вставка текста  
• «а» − вставить текст после курсора;  
• «А» − вставить текст в конец строки;  
• «i» − вставить текст перед курсором;  
• n «i» − вставить текст n раз;  
• «I» − вставить текст в начало строки. 
- Вставка строки  
• «о» − вставить строку под курсором;  
• «О» − вставить строку над курсором. 
- Удаление текста  
• «x» − удалить один символ в буфер;  
• «d» «w» − удалить одно слово в буфер;  
• «d» «$» − удалить в буфер текст от курсора до конца строки;  
• «d» «0» − удалить в буфер текст от начала строки до позиции курсора;  
• «d» «d» − удалить в буфер одну строку;  
• n «d» «d» − удалить в буфер n строк. 
- Отмена и повтор произведённых изменений  
• «u» − отменить последнее изменение;   
• «.» − повторить последнее изменение. 
- Копирование текста в буфер  
• «Y» − скопировать строку в буфер;  
• n «Y» − скопировать n строк в буфер;  
• «y» «w» − скопировать слово в буфер. 
- Вставка текста из буфера  
• «p» − вставить текст из буфера после курсора;  
• «P» − вставить текст из буфера перед курсором. 
- Замена текста  
• «c» «w» − заменить слово;  
• n «c» «w» − заменить nслов;  
• «c» «$» − заменить текст от курсора до конца строки;  
• «r» − заменить слово;  
• «R» − заменить текст. 
- Поиск текста  
• «/» текст − произвести поиск вперёд по тексту указанной строки символов текст;  
• «?» текст − произвести поиск назад по тексту указанной строки символов текст. 
- Копирование и перемещение текста  
• «:» n,m «d» – удалить строки с n по m;  
• «:» i,j «m» k – переместить строки с i по j, начиная со строки k;  
• «:» i,j «t» k – копировать строки с i по j в строку k;  
• «:» i,j «w» имя-файла – записать строки с i по j в файл с именем имя-файла.
7. Необходимо заполнить строку символами $. 
Чтобы заполнить строку символами , , n "G", n–, "0"."c" "", чтобы заменить текст от курсора до конца строки, и ввести символы $.
8. Чтобы отменить по одному предыдущему действию последовательно, необходимо нажать «u». Чтобы отменить все изменения, произведённые со времени
последней записи, нужно нажать «:» «e» «!». 
9. Назовите и дайте характеристику основным группам команд режима последней строки.  
Команды редактирования в режиме командной строки 
- Копирование и перемещение текста  
• «:»n,m «d» − удалить строки с n по m;  
• «:»i,j «m» k − переместить строки с i по j, начиная со строки k;  
• «:»i,j «t» k − копировать строки с i по j в строку k;  
• «:»i,j «w» имя-файла − записать строки с i по j в файл с именем имя-файла.
- Запись в файл и выход из редактора  
• «:» «w» − записать изменённый текст в файл, не выходя из vi;  
• «:» «w» имя-файла − записать изменённый текст в новый файл с именем имя-файла;  
• «:» «w» «!» имя-файла − записать изменённый текст в файл с именем имяфайла;  
• «:» «w» «q» − записать изменения в файл и выйти из vi;  
• «:» «q» − выйти из редактора vi;  
• «:» «q» «!» − выйти из редактора без записи;  
• «:» «e» «!» − вернуться в командный режим отменив все изменения, произведённые со времени последней записи.
- Опции  
Опции редактора vi позволяют настроить рабочую среду. Для задания опций используется команда set (в режиме последней строки):  
• «:»set all − вывести полный список опций;  
• «:»set nu − вывести номера строк;  
• «:»set list − вывести невидимые символы;  
• «:»set ic − не учитывать при поиске, является ли символ прописным или строчным.  
Если вы хотите отказаться от использования опции, то в команде set перед именем опции надо поставить no. 
10. Как определить, не перемещая курсора, позицию, в которой заканчивается строка? 
Чтобы определить, не перемещая курсора, позицию, в которой заканчивается строка, нужно в командном режиме находясь на нужной строке нажать "$" и посмотреть на число после запятой в правом нижнем углу экрана. 
11. Выполните анализ опций редактора vi (сколько их, как узнать их назначение и т.д.).  
Опции редактора vi позволяют настроить рабочую среду. Для задания опций используется команда set (в режиме командной строки). Если вы хотите
отказаться от использования опции, то в команде set перед именем опции надо поставить no. Чтобы просмотреть опции редактора vi, необходимо нажать «:» set all. Нажав «:» help “название_опции”, можно узнать назначение конкретной опции.
12. Как определить режим работы редактора vi? 
В режиме командной строки внизу редактора присутствует «:», в режиме ввода – «–ВСТАВКА –», в командном режиме внизу ничего нет. 
13. Постройте граф взаимосвязи режимов работы редактора vi.  
Граф взаимосвязи режимов работы редактора vi. (Рис. [-@fig:006]).

![Граф взаимосвязи режимов работы редактора vi.](image/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-05-10%20210011.png){#fig:006 width=80%}

# Выводы

Таким образом, в ходе ЛР№8 я познакомилась с операционной системой Linux.  
Получила практические навыки работы с редактором vi, установленным по умолчанию во всех дистрибутивах.
